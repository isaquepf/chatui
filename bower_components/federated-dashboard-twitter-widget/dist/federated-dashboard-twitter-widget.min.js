!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Twitter"),Twitter.Controller=function(){function a(){}return a.setupWidgetIn=function(a){return new Twitter.Widgets.Controller(a).initialize()},a}()}.call(this),function(){namespace("Twitter"),Twitter.Display=function(){function a(){}return a.generateLogo=function(a){return'<i class="fa fa-twitter '+a["class"]+'" data-id="'+a.dataId+'"></i>'},a}()}.call(this),function(){namespace("Twitter.Widgets"),Twitter.Widgets.API=function(){function a(){}return a.getPosts=function(a,b){var c;return c=this.generateUrl(a),$.get(c,function(){return function(a){return b.showTweets(a)}}(this),"json")},a.generateUrl=function(a){return"/search_twitter/"+a},a}()}.call(this),function(){namespace("Twitter.Widgets"),Twitter.Widgets.Controller=function(){function a(a){b=a.key,this.container=a.container,this.display=new Twitter.Widgets.Display(this.container,a.animationSpeed),this.defaultValue=a.defaultValue,this.setAsInactive(),this.refreshRate=a.refreshRate}var b;return b=void 0,a.prototype.initialize=function(){return this.display.setupWidget(),this.bind(),this.displayDefault(),this.setAsActive()},a.prototype.displayDefault=function(){return this.defaultValue?this.getTwitterPosts(this.defaultValue):void 0},a.prototype.setAsActive=function(){return this.activeStatus=!0},a.prototype.setAsInactive=function(){return this.activeStatus=!1},a.prototype.isActive=function(){return this.activeStatus},a.prototype.bind=function(){return $(""+this.container+" [data-name=widget-form]").on("submit",function(a){return function(b){return b.preventDefault(),a.processClickedButton()}}(this)),$(""+this.container+" [data-name=widget-close]").click(function(a){return function(){return a.closeWidget()}}(this))},a.prototype.processClickedButton=function(){var a;return a=this.display.getInput(),this.getTwitterPosts(a)},a.prototype.getTwitterPosts=function(a){return Twitter.Widgets.API.getPosts(a,this.display),this.refreshRate?(this.clearActiveTimeout(),this.refreshImages(a)):void 0},a.prototype.clearActiveTimeout=function(){return this.timeout?clearTimeout(this.timeout):void 0},a.prototype.refreshImages=function(a){return this.timeout=setTimeout(function(b){return function(){return b.isActive()?b.getTwitterPosts(a):void 0}}(this),1e3*this.refreshRate)},a.prototype.closeWidget=function(){return this.unbind(),this.removeContent(),this.setAsInactive()},a.prototype.removeContent=function(){return this.display.removeWidget()},a.prototype.unbind=function(){return $(""+this.container+" [data-name=widget-form]").unbind("submit"),$(""+this.container+" [data-name=widget-close]").unbind("click")},a}()}.call(this),function(){namespace("Twitter.Widget"),Twitter.Widgets.Display=function(){function a(a,b){this.container=a,this.animationSpeed=b}return a.prototype.setupWidget=function(){var a;return a=Twitter.Widgets.Templates.renderForm(),$(this.container).append(a)},a.prototype.getInput=function(){return $(""+this.container+" [name=widget-input]").val()},a.prototype.removeWidget=function(){return $(this.container).remove()},a.prototype.showTweets=function(a){var b,c;return b=this.formatResponse(a),c=this.generateHtml(b),$(""+this.container+" [data-name=widget-output]").html(c)},a.prototype.formatResponse=function(a){var b;return b=[],_.forEach(a,function(a){return function(c){return b.push(a.formatTweet(c))}}(this)),b},a.prototype.formatTweet=function(a){var b;return b={},b.text=a.text,b.user_name=a.user.name,b.img_url=a.user.profile_image_url,b},a.prototype.generateHtml=function(a){return Twitter.Widgets.Templates.renderTweets(a)},a}()}.call(this),function(){namespace("Twitter.Widgets"),Twitter.Widgets.Templates=function(){function a(){}return a.renderForm=function(){return _.template("<div class='widget' data-name='widget-wrapper'>\n  <div class='widget-header' data-name='sortable-handle'>\n    <h2 class=\"widget-title\">Twitter</h2>\n    <span class='widget-close' data-name='widget-close'>Ã—</span>\n    <form class='widget-form' data-name='widget-form'>\n      <input name='widget-input' type='text' autofocus='true'>\n      <button data-name=\"form-button\">Search Twitter</button><br>\n    </form>\n  </div>\n  <div class=\"widget-body\" data-name=\"widget-output\"></div>\n</div>",{})},a.renderTweets=function(a){return _.template('<% for(var i = 0; i< tweets.length; i++) { %>\n  <div class="tweet">\n    <div class="user-img"><img class="tweeter-user-img" data-id="user-img" src="<%= tweets[i]["img_url"] %>"/></div>\n    <div class="tweet-body">\n      <h3 class="twitter-user-name" data-id="user-name"><%= tweets[i]["user_name"] %></h3>\n      <p class="twitter-tweet-content" data-id="tweet-content"><%= tweets[i]["text"] %></p>\n    </div>\n  </div>\n<% } %>',{tweets:a})},a.renderImage=function(a){return _.template("<img src='<%= imgData['imgSrc'] %>' data-id='<%= imgData['dataId'] %>' style='width: <%= imgData['width'] %>px'/>",{imgData:a})},a.renderLogo=function(a){return this.renderImage(a)},a}()}.call(this);